<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lgy.smile.dao.NoticeCommentMapperinterface">

<!--     <select id="getCount" resultType="int"> -->
 <!--         SELECT count(*) FROM comment_notice -->
<!--           SELECT COUNT(comment.content)  -->
<!-- FROM smile.board_notice board, smile.comment_notice comment -->
<!-- WHERE board.identity = #{identity} -->
<!--     </select> -->
    <insert id="writecomment" parameterType="hashmap">
    insert into comment_notice(identity, content, created, user,board) values(
			null , #{content} , #{created} , #{user} , #{board}
		)
    </insert>
     <select id="contentViewcomment" parameterType="hashmap" resultType="com.lgy.smile.dto.NoticeCommentDto">
		SELECT 
			user.nickname ,
		    comment.*
		FROM 
			smile.board_notice board ,
		    smile.comment_notice comment , 
		    smile.user user
		WHERE
			board.identity = #{identity}
			AND board.identity = comment.board
		    AND user.identity = comment.user
    </select>
    
    <update id="modifycomment" parameterType="hashmap">
		update comment_notice set content = #{content} 
		 where identity=#{identity}
    </update>
    
    <delete id="deletecomment" parameterType="hashmap">
		delete from comment_notice where identity=#{identity}
    </delete>
    
    <insert id="replaycomment" parameterType="hashmap">
    insert into comment_notice (identity, content, created, user,board,reply_by_user)    
        SELECT null,comment.content,comment.created,comment.user,comment.board,comment.reply_by_user
		FROM 
		board.identity = #{identity}
		smile.comment_notice comment ,
		smile.user user
   where
    	user.nickname=#{nickname} =comment.user=#{user}
    </insert>
    
</mapper>